<div class="thermometer-container" scroll>
  <aside #menu>
    <page-season
      (seasonData)="getSeasonData($event)"
      [collapse]="!menuOpen"
      [idConsulta]="idConsulta"
      [tipoConsulta]="tipoConsulta"
      [nomeConsulta]="nomeConsulta"
      [time]="time"
      [showTeamGoal]="showDashColaborador"
      [isCSLayout]="false"
    ></page-season>

    <button
      class="menu-handler"
      flex
      vAlign="center"
      hAlign="center"
      (click)="toggleMenu()"
    >
      <i class="icon-arrow_forward_ios" [ngClass]="{ invert: menuOpen }"></i>
    </button>
  </aside>

  <div class="thermometer-content">
    <!-- Header -->
    <div class="thermometer-header">
      <h2>
        Esta p치gina 칠 um exemplo de como ficaria a p치gina de metas e distribui칞칚o!
      </h2>
      <h1 class="thermometer-title">
        Commercial Team Goal Tracker
      </h1>
      <p class="thermometer-subtitle">
        Acompanhe o progresso e desbloqueie recompensas juntos
      </p>
    </div>

    <div class="thermometer-grid">
      <!-- Thermometer Section -->
      <div class="thermometer-card">
        <div class="thermometer-card-header">
          <h2 class="thermometer-card-title">Term칪metro de Progresso</h2>
          <p class="thermometer-card-subtitle">
            ${{ currentAmount | number }} de ${{ goalAmount | number }}
          </p>
        </div>

        <!-- Thermometer Visual -->
        <div class="thermometer-visual">
          <div class="relative">
            <!-- Thermometer Base -->
            <div class="thermometer-base">
              <!-- Stage Background Sections -->
              <div class="thermometer-stage-bg thermometer-stage-red"></div>
              <div class="thermometer-stage-bg thermometer-stage-orange"></div>
              <div class="thermometer-stage-bg thermometer-stage-cyan"></div>
              <div class="thermometer-stage-bg thermometer-stage-green"></div>
              
              <!-- Progress Fill -->
              <div 
                class="thermometer-fill"
                [style.height]="currentProgress + '%'"
                [style.background]="'linear-gradient(to top, ' + getThermometerColor(currentProgress) + ', transparent)'"
              >
                <div class="thermometer-fill-animation"></div>
              </div>
              
              <!-- Stage Indicators Inside Thermometer -->
              <div 
                *ngFor="let stage of stageMarkers; let i = index"
                class="thermometer-stage-indicator"
                [style.bottom]="stage.percentage + '%'"
              >
                <!-- Stage line -->
                <div class="thermometer-stage-line"></div>
                
                <!-- Current stage highlight -->
                <div 
                  *ngIf="currentProgress >= (i === 0 ? 0 : stageMarkers[i-1]?.percentage || 0) && currentProgress < stage.percentage"
                  class="thermometer-stage-current"
                  [style.backgroundColor]="stage.color"
                >
                  ATUAL
                </div>
                
                <!-- Percentage labels -->
                <span 
                  class="thermometer-stage-label"
                  [style.color]="stage.color"
                >
                  {{ stage.label }}
                </span>
                
                <!-- Reward labels -->
                <span 
                  class="thermometer-stage-reward"
                  [style.color]="stage.color"
                >
                  {{ stage.reward }}
                </span>
              </div>
              
              <!-- Achievement indicator for completed stages -->
              <div *ngIf="currentProgress >= 100" class="thermometer-achievement">
                <div class="thermometer-achievement-icon">
                  <span style="font-size: 1.5rem;">游끥</span>
                </div>
              </div>
            </div>

            <!-- Thermometer Bulb -->
            <div 
              class="thermometer-bulb"
              [style.backgroundColor]="getThermometerColor(currentProgress)"
            >
              <!-- Thermometer icon placeholder -->
              <svg class="thermometer-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
              </svg>
            </div>
          </div>
        </div>

        <!-- Current Progress -->
        <div class="thermometer-progress">
          <div 
            class="thermometer-progress-value"
            [style.background]="'linear-gradient(to right, ' + getThermometerColor(currentProgress) + ', ' + getThermometerColor(currentProgress) + '80)'"
            style="WebkitBackgroundClip: text; backgroundClip: text;"
          >
            {{ currentProgress }}%
          </div>
          <p class="thermometer-progress-label">da meta alcan칞ada</p>
          <div class="thermometer-stage-info" [ngClass]="currentTier.color">
            Est치gio Atual: {{ currentTier.tier }}
          </div>
        </div>
      </div>

      <!-- Rewards Section -->
      <div class="rewards-section">
        <!-- Current Tier -->
        <div class="reward-card">
          <h3 class="reward-card-header">Est치gio Atual</h3>
          <div class="reward-card-content">
            <div class="reward-tier-name" [ngClass]="currentTier.color">
              {{ currentTier.tier }}
            </div>
            <div class="reward-percentage">
              {{ currentTier.percentage }}% de Distribui칞칚o
            </div>
            <div class="reward-pot">
              Pote Total: ${{ totalReward | number }}
            </div>
            <div class="reward-button reward-button-current">
              Sua Parte: ${{ individualReward | number }}
            </div>
          </div>
        </div>

        <!-- Next Tier -->
        <div *ngIf="nextTier" class="reward-card reward-card-next">
          <h3 class="reward-card-header text-blue-400-header">
            Pr칩ximo Est치gio
          </h3>
          <div class="reward-card-content">
            <div class="reward-tier-name text-blue-400">
              {{ nextTier.tier }}
            </div>
            <div class="reward-percentage">
              {{ nextTier.percentage }}% de Distribui칞칚o
            </div>
            <div class="reward-pot">
              Necess치rio: {{ getNextTierRequired() }} para desbloquear
            </div>
            <div class="reward-button reward-button-next">
              Potencial: ${{ getNextTierPotential() | number }}
            </div>
          </div>
        </div>

        <!-- Tier Breakdown -->
        <div class="reward-card">
          <h3 class="reward-card-header">Est치gios de Recompensa</h3>
          <div class="tier-breakdown">
            <div 
              *ngFor="let tier of [
                { range: '0-49%', percentage: 1, color: 'text-red-400', bgColor: 'tier-item-current-red' },
                { range: '50-69%', percentage: 2, color: 'text-orange-400', bgColor: 'tier-item-current-orange' },
                { range: '70-99%', percentage: 3, color: 'text-cyan-400', bgColor: 'tier-item-current-cyan' },
                { range: '100%+', percentage: 4, color: 'text-green-400', bgColor: 'tier-item-current-green' }
              ]; let i = index"
              class="tier-item"
              [ngClass]="isCurrentTier(i) ? tier.bgColor + ' tier-item-current ' + tier.color : 'tier-item-inactive'"
            >
              <span [ngClass]="tier.color">{{ tier.range }}</span>
              <span [ngClass]="tier.color + ' tier-percentage'">
                {{ tier.percentage }}% da receita
              </span>
              <span *ngIf="isCurrentTier(i)" [ngClass]="tier.color + ' tier-current-label'">
                ATUAL
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Team Stats -->
    <div class="team-stats">
      <div class="team-stats-grid">
        <div>
          <div class="team-stat-value text-blue-400">
            {{ teamSize }}
          </div>
          <div class="team-stat-label">Membros da Equipe</div>
        </div>
        <div>
          <div class="team-stat-value text-green-400">
            ${{ (goalAmount - currentAmount) | number }}
          </div>
          <div class="team-stat-label">Restante para a Meta</div>
        </div>
        <div>
          <div class="team-stat-value text-purple-400">
            ${{ getMaxPotentialPerPerson() | number }}
          </div>
          <div class="team-stat-label">Potencial M치ximo por Pessoa</div>
        </div>
      </div>
    </div>
  </div>
</div>