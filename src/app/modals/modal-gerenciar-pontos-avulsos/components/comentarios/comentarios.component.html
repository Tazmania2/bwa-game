<div class="comentarios-container">
  <!-- Header -->
  <div class="comentarios-header">
    <h4>Comentários</h4>
    <small>Histórico de comentários da {{aliases?.actionAlias || 'atividade'}}</small>
  </div>
  
  <!-- Lista de comentários -->
  <div class="comentarios-lista" *ngIf="!loadingComentarios && temComentarios()">
    <div class="comentario-item" *ngFor="let comentario of getComentariosOrdenados()">
      <div class="comentario-header">
        <span class="comentario-autor">{{ formatEmailToName(comentario.created_by) }}</span>
        <span class="comentario-data">{{ comentario.created_at | date:'dd/MM/yyyy HH:mm' }}</span>
        <span class="comentario-tipo" [ngClass]="getTipoComentarioClass(comentario.type)">
          {{ getTipoComentarioLabel(comentario.type) }}
        </span>
      </div>
      <div class="comentario-mensagem">
        {{ comentario.message }}
      </div>
    </div>
  </div>
  
  <!-- Estado vazio -->
  <div class="comentarios-vazio" *ngIf="!loadingComentarios && !temComentarios()">
    <div class="empty-state">
      <i class="icon-chat"></i>
      <p>Nenhum comentário encontrado</p>
      <small>Os comentários aparecerão aqui quando houver interações</small>
    </div>
  </div>
  
  <!-- Loading -->
  <div class="comentarios-loading" *ngIf="loadingComentarios">
    <div class="loading-spinner">Carregando comentários...</div>
  </div>
  
  <!-- Formulário para novo comentário -->
  <div class="comentario-form" *ngIf="currentUserEmail">
    <div class="form-header">
      <h5>Adicionar comentário</h5>
    </div>
    
    <div class="form-content">
      <textarea 
        class="comentario-textarea"
        [(ngModel)]="novoComentario"
        [placeholder]="getTextoPlaceholder()"
        rows="3"
        maxlength="500"
        [disabled]="adicionandoComentario">
      </textarea>
      
      <div class="form-actions">
        <div class="char-count">
          {{ novoComentario.length }}/500
        </div>
        <button 
          class="btn-adicionar"
          (click)="adicionarComentario()"
          [disabled]="!podeAdicionarComentario()">
          <i *ngIf="!adicionandoComentario" class="icon-send"></i>
          <i *ngIf="adicionandoComentario" class="icon-spinner"></i>
          <span>{{ adicionandoComentario ? 'Adicionando...' : 'Adicionar' }}</span>
        </button>
      </div>
    </div>
  </div>
</div> 